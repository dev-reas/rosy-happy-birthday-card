<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A letter for you ‚ú®</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            /* Use shared theme background from style.css for consistency */
            background-image: linear-gradient(var(--color-pink), var(--color-pink));
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 3s forwards 0.5s;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        h1 {
            font-size: 2.5rem;
            color: #6a4c93;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        /* Letter Section */
        .letter-container {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(106, 76, 147, 0.3);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .letter-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px;
            box-shadow: inset 0 0 15px rgba(255, 215, 232, 0.7);
            pointer-events: none;
            z-index: 1;
        }

        .letter {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #333;
            position: relative;
            z-index: 2;
            min-height: 200px;
        }

        .video-container {
            display: none;
            position: relative;
            width: 100%;
            padding-top: 56.25%;
            /* 16:9 Aspect Ratio */
            margin-bottom: 40px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(106, 76, 147, 0.3), 0 0 30px rgba(255, 215, 232, 0.5);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Surprise button & modal removed (not used) */

        /* Playlist styles removed (not used) */

        /* Back Button */
        .back-button {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.7);
            border: 2px solid #6a4c93;
            color: #6a4c93;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: #6a4c93;
            color: white;
        }

        /* Floating Elements */
        .floating-element {
            position: absolute;
            pointer-events: none;
            opacity: 0.7;
            z-index: 1;
            animation-name: float;
            animation-timing-function: ease-in-out;
            animation-iteration-count: infinite;
            animation-direction: alternate;
        }

        /* Music controls removed (not used) */

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes gradientBackground {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes gradientButton {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
            }

            100% {
                transform: translateY(-20px) rotate(5deg);
            }
        }

        /* Cursor Effect */
        .cursor-effect {
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: rgba(255, 182, 193, 0.7);
            pointer-events: none;
            z-index: 1000;
            transform: translate(-50%, -50%);
            transition: opacity 0.5s ease;
            opacity: 0;
        }

        /* Typed letter styles */
        #typed-text p {
            margin: 0 0 1rem 0;
        }

        .type-cursor {
            display: inline-block;
            margin-left: 6px;
            animation: blink 1s steps(1) infinite;
            color: #6a4c93;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        /* Signature styling */
        .typed-signature {
            margin: 1rem 0 0 0;
            text-align: right;
            /* font-family: 'Dancing Script', cursive; */
            font-style: italic;
            font-size: 1.1rem;
            color: #6a4c93;
            font-weight: 600;
        }

        /* Salutation styling (first line) */
        .typed-salutation {
            margin: 0 0 0.75rem 0;
            text-align: left;
            font-weight: 700;
            font-style: italic;
            color: #6a4c93;
            font-size: 1.05rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .container {
                padding: 15px;
            }

            .letter-container {
                padding: 20px;
            }

            .letter {
                font-size: 1rem;
            }

            /* surprise button rules removed */

            .floating-element {
                max-width: 40px;
                max-height: 40px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>For the one who matters most ‚ù§Ô∏è</h1>
        </header>

        <div class="letter-container">
            <div class="letter" id="typed-text"></div>
        </div>

        <div class="video-container" id="video-message">
            <!-- Replace with your video embed code -->
            <iframe src="about:blank" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>

    <div class="nav-buttons">
        <button class="btn" onclick="goBack()">‚óÄ Back to Tulips</button>
        <button class="btn" onclick="goNext()">Back to Home üè†Ô∏é</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Fade in animation
            setTimeout(() => {
                document.querySelector('.container').style.opacity = 1;
            }, 500);

            // Typewriter effect for letter (paragraph-aware)
            const letterContentRaw = `Annyeong Rose Angelique Enriquez,

            Hello po! How have you been? I hope you're doing well and staying safe. I‚Äôve been thinking about you and just wanted to take a moment to wish you a very Happy Birthday! üéâü•≥ I hope today brings you so much joy and all the things you‚Äôve been hoping and praying for. You deserve nothing less than happiness and peace, especially on your special day.

            Always wear that beautiful smile of yours because it lights up the world around you. It‚Äôs one of the things I‚Äôll always remember and will never stop looking for. üòä I hope it shines brighter than ever today. I hope and pray that the remaining months of this year and also sama na naten yung next year and mga sumunod pa, to bring you amazing opportunities, good health, and endless blessings. Keep being the incredible person that you are, and always remember how much you are loved‚Äînot just by those around you, but also by our Father in Heaven. üòá

            I wish you the best, not just today, but every day. I continue to pray that you find peace, joy, and success in everything you do. You've always been someone I admire, and I truly hope life brings you nothing but the best. And remember, even when life feels stormy, the storm is not inside you. So don‚Äôt be afraid or worry, because Jesus is always with you.

            Remember, you‚Äôre special‚Äînot just to those around you, or to me (HAHAHA nasingit pa nga! üòÅ), but most especially to our Father in Heaven. You are His beloved daughter, and He loves you more than you can ever imagine. Don‚Äôt forget to thank Him for all the blessings He has given you, whether big or small.

            Take care always, and never forget how amazing and beautiful you are, inside and out. I‚Äôm praying for all the love and happiness in the world to surround you today and always.

            With all my love,
            Emman Sagun`;

            const paragraphs = letterContentRaw.split(/\n\s*\n/).map(p => p.trim()).filter(Boolean);
            const container = document.getElementById('typed-text');
            container.innerHTML = '';

            // cursor element
            const cursor = document.createElement('span');
            cursor.className = 'type-cursor';
            cursor.textContent = '|';

            function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

            function typeToElement(text, el, speed = 28) {
                return new Promise(resolve => {
                    let i = 0;
                    function step() {
                        if (i < text.length) {
                            // append character as textContent to avoid HTML injection
                            el.textContent += text.charAt(i++);
                            setTimeout(step, speed);
                        } else {
                            resolve();
                        }
                    }
                    step();
                });
            }

            (async function typeParagraphs() {
                for (let i = 0; i < paragraphs.length; i++) {
                    const text = paragraphs[i];
                    const pEl = document.createElement('p');
                    // Salutation (first paragraph) gets its own styling
                    if (i === 0) {
                        pEl.className = 'typed-salutation';
                    } else {
                        pEl.className = 'typed-paragraph';
                    }
                    container.appendChild(pEl);
                    // ensure cursor is after current paragraph
                    container.appendChild(cursor);

                    // If this is the last paragraph and contains an internal newline,
                    // treat the last line as the signature and render it right-aligned.
                    if (i === paragraphs.length - 1 && text.includes('\n')) {
                        const lines = text.split('\n').map(l => l.trim()).filter(Boolean);
                        // type the closing line(s) except the final signature line
                        const closing = lines.slice(0, -1).join(' ');
                        const signature = lines[lines.length - 1];

                        if (closing) {
                            await typeToElement(closing, pEl);
                        }

                        // small pause then create signature element
                        await sleep(300);
                        const sigEl = document.createElement('p');
                        sigEl.className = 'typed-signature';
                        container.appendChild(sigEl);
                        // move cursor after signature while typing
                        container.appendChild(cursor);
                        await typeToElement(signature, sigEl, 36);
                        await sleep(200);
                    } else {
                        // normal paragraph typing; if it's the salutation use a slightly faster speed
                        const speed = (i === 0) ? 20 : 28;
                        await typeToElement(text, pEl, speed);
                    }

                    // small pause between paragraphs
                    await sleep(500);
                }
                // remove cursor after typing finishes
                cursor.remove();
            })();

            // Create floating elements
            const floatingElements = [
                { type: 'heart', color: '#ff6b8a', size: '20px' },
                { type: 'heart', color: '#f48fb1', size: '30px' },
                { type: 'heart', color: '#f48fb1', size: '25px' },
                { type: 'star', color: '#ffd54f', size: '25px' },
                { type: 'star', color: '#ffecb3', size: '15px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '30px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '30px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '20px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '20px' },
                { type: 'sparkle', emoji: 'üå∑', size: '25px' },
                { type: 'sparkle', emoji: 'üå∑', size: '25px' },
                { type: 'sparkle', emoji: 'üå∑', size: '20px' },
                { type: 'sparkle', emoji: 'üå∑', size: '20px' },
                { type: 'sparkle', emoji: 'üå∑', size: '20px' },
                { type: 'heart', color: '#ff6b8a', size: '25px' },
                { type: 'heart', color: '#f48fb1', size: '20px' },
                { type: 'star', color: '#ffd54f', size: '20px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '25px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '25px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '20px' },
                { type: 'teddy', emoji: 'ü¶ã', size: '20px' },
                { type: 'sparkle', emoji: 'üå∑', size: '25px' },
                { type: 'sparkle', emoji: 'üå∑', size: '25px' },
                { type: 'sparkle', emoji: 'üå∑', size: '20px' },
                { type: 'sparkle', emoji: 'üå∑', size: '20px' },
                { type: 'sparkle', emoji: 'üå∑', size: '20px' },
            ];

            floatingElements.forEach((element, index) => {
                createFloatingElement(element, index);
            });

            // Cursor effect
            document.addEventListener('mousemove', createCursorEffect);

            // Surprise/modal and music controls removed ‚Äî no wiring required.

            // Helper Functions
            function createFloatingElement(element, index) {
                const floatingElement = document.createElement('div');
                floatingElement.classList.add('floating-element');

                if (element.emoji) {
                    floatingElement.textContent = element.emoji;
                    floatingElement.style.fontSize = element.size;
                } else if (element.type === 'heart') {
                    floatingElement.innerHTML = '<i class="fas fa-heart"></i>';
                    floatingElement.style.color = element.color;
                    floatingElement.style.fontSize = element.size;
                } else if (element.type === 'star') {
                    floatingElement.innerHTML = '<i class="fas fa-star"></i>';
                    floatingElement.style.color = element.color;
                    floatingElement.style.fontSize = element.size;
                }

                // Random positioning
                const randomX = Math.random() * window.innerWidth;
                const randomY = Math.random() * window.innerHeight;
                floatingElement.style.left = `${randomX}px`;
                floatingElement.style.top = `${randomY}px`;

                // Animation duration and delay
                const duration = 5 + Math.random() * 10;
                const delay = Math.random() * 5;
                floatingElement.style.animationDuration = `${duration}s`;
                floatingElement.style.animationDelay = `${delay}s`;

                document.body.appendChild(floatingElement);
            }

            function createCursorEffect(e) {
                const cursorEffect = document.createElement('div');
                cursorEffect.classList.add('cursor-effect');
                cursorEffect.style.left = `${e.pageX}px`;
                cursorEffect.style.top = `${e.pageY}px`;
                document.body.appendChild(cursorEffect);

                setTimeout(() => {
                    cursorEffect.style.opacity = 1;
                    cursorEffect.style.transform = `translate(-50%, -50%) scale(${Math.random() * 0.5 + 0.5})`;

                    setTimeout(() => {
                        cursorEffect.style.opacity = 0;
                        setTimeout(() => {
                            cursorEffect.remove();
                        }, 500);
                    }, 300);
                }, 10);
            }

            // Navigation functions (exposed to global scope so onclick handlers work)
            window.goBack = function () {
                window.location.href = "tulips.html";
            };

            window.goNext = function () {
                window.location.href = "index.html";
            };
        });
    </script>
</body>

</html>